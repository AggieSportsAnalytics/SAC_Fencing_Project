{"id":"node_modules/@tensorflow-models/pose-detection/posenet/calculators/decode_single_pose_util.js","dependencies":[{"name":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\posenet\\calculators\\decode_single_pose_util.js.map","includedInParent":true,"mtime":1705282595583},{"name":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\package.json","includedInParent":true,"mtime":1707452023465},{"name":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\.babelrc","includedInParent":true,"mtime":1699931790989},{"name":"@tensorflow/tfjs-core","loc":{"line":20,"column":17},"parent":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\posenet\\calculators\\decode_single_pose_util.js","resolved":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow\\tfjs-core\\dist\\index.js"},{"name":"../../constants","loc":{"line":21,"column":26},"parent":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\posenet\\calculators\\decode_single_pose_util.js","resolved":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\constants.js"},{"name":"../ops/get_offset_vectors","loc":{"line":22,"column":35},"parent":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\posenet\\calculators\\decode_single_pose_util.js","resolved":"C:\\Users\\Lenovo\\Documents\\ASA_Fencing_Project\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\posenet\\ops\\get_offset_vectors.js"}],"generated":{"js":"\"use strict\";\r\n/**\r\n * @license\r\n * Copyright 2019 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.getOffsetPointsGPU = exports.getOffsetVectors = exports.getOffsetPoints = exports.getPointsConfidence = exports.argmax2d = void 0;\r\nvar tf = require(\"@tensorflow/tfjs-core\");\r\nvar constants_1 = require(\"../../constants\");\r\nvar get_offset_vectors_1 = require(\"../ops/get_offset_vectors\");\r\nfunction mod(a, b) {\r\n    return tf.tidy(function () {\r\n        var floored = tf.div(a, tf.scalar(b, 'int32'));\r\n        return tf.sub(a, tf.mul(floored, tf.scalar(b, 'int32')));\r\n    });\r\n}\r\nfunction argmax2d(inputs) {\r\n    var _a = inputs.shape, height = _a[0], width = _a[1], depth = _a[2];\r\n    return tf.tidy(function () {\r\n        var reshaped = tf.reshape(inputs, [height * width, depth]);\r\n        var coords = tf.argMax(reshaped, 0);\r\n        var yCoords = tf.expandDims(tf.div(coords, tf.scalar(width, 'int32')), 1);\r\n        var xCoords = tf.expandDims(mod(coords, width), 1);\r\n        return tf.concat([yCoords, xCoords], 1);\r\n    });\r\n}\r\nexports.argmax2d = argmax2d;\r\nfunction getPointsConfidence(heatmapScores, heatMapCoords) {\r\n    var numKeypoints = heatMapCoords.shape[0];\r\n    var result = new Float32Array(numKeypoints);\r\n    for (var keypoint = 0; keypoint < numKeypoints; keypoint++) {\r\n        var y = heatMapCoords.get(keypoint, 0);\r\n        var x = heatMapCoords.get(keypoint, 1);\r\n        result[keypoint] = heatmapScores.get(y, x, keypoint);\r\n    }\r\n    return result;\r\n}\r\nexports.getPointsConfidence = getPointsConfidence;\r\nfunction getOffsetPoints(heatMapCoordsBuffer, outputStride, offsetsBuffer) {\r\n    return tf.tidy(function () {\r\n        var offsetVectors = getOffsetVectors(heatMapCoordsBuffer, offsetsBuffer);\r\n        return tf.add(tf.cast(tf.mul(heatMapCoordsBuffer.toTensor(), tf.scalar(outputStride, 'int32')), 'float32'), offsetVectors);\r\n    });\r\n}\r\nexports.getOffsetPoints = getOffsetPoints;\r\nfunction getOffsetVectors(heatMapCoordsBuffer, offsetsBuffer) {\r\n    var result = [];\r\n    for (var keypoint = 0; keypoint < constants_1.COCO_KEYPOINTS.length; keypoint++) {\r\n        var heatmapY = heatMapCoordsBuffer.get(keypoint, 0).valueOf();\r\n        var heatmapX = heatMapCoordsBuffer.get(keypoint, 1).valueOf();\r\n        var _a = getOffsetPoint(heatmapY, heatmapX, keypoint, offsetsBuffer), x = _a.x, y = _a.y;\r\n        result.push(y);\r\n        result.push(x);\r\n    }\r\n    return tf.tensor2d(result, [constants_1.COCO_KEYPOINTS.length, 2]);\r\n}\r\nexports.getOffsetVectors = getOffsetVectors;\r\nfunction getOffsetPoint(y, x, keypoint, offsetsBuffer) {\r\n    return {\r\n        y: offsetsBuffer.get(y, x, keypoint),\r\n        x: offsetsBuffer.get(y, x, keypoint + constants_1.COCO_KEYPOINTS.length)\r\n    };\r\n}\r\nfunction getOffsetPointsGPU(heatMapCoordsBuffer, outputStride, offsetsBuffer) {\r\n    return tf.tidy(function () {\r\n        var offsetVectors = (0, get_offset_vectors_1.getOffsetVectorsGPU)(heatMapCoordsBuffer, offsetsBuffer);\r\n        return tf.add(tf.cast(tf.mul(heatMapCoordsBuffer, tf.scalar(outputStride, 'int32')), 'float32'), offsetVectors);\r\n    });\r\n}\r\nexports.getOffsetPointsGPU = getOffsetPointsGPU;\r\n"},"sourceMaps":{"js":{"version":3,"file":"decode_single_pose_util.js","sourceRoot":"","sources":["../../../src/posenet/calculators/decode_single_pose_util.ts"],"names":[],"mappings":"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","sourcesContent":[null]}},"error":null,"hash":"b44d86a6773be5f5e0e02206d12760b1","cacheData":{"env":{}}}