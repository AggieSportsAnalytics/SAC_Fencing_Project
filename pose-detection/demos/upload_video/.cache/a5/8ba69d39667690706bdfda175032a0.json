{"id":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_one_euro_filter.js","dependencies":[{"name":"C:\\Users\\Lenovo\\Documents\\SAC Fencing CV\\tfjs-models\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_one_euro_filter.js.map","includedInParent":true,"mtime":1694704590798},{"name":"C:\\Users\\Lenovo\\Documents\\SAC Fencing CV\\tfjs-models\\pose-detection\\demos\\upload_video\\package.json","includedInParent":true,"mtime":1694684692056},{"name":"C:\\Users\\Lenovo\\Documents\\SAC Fencing CV\\tfjs-models\\pose-detection\\demos\\upload_video\\.babelrc","includedInParent":true,"mtime":1694684692055},{"name":"./one_euro_filter","loc":{"line":40,"column":32},"parent":"C:\\Users\\Lenovo\\Documents\\SAC Fencing CV\\tfjs-models\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\keypoints_one_euro_filter.js","resolved":"C:\\Users\\Lenovo\\Documents\\SAC Fencing CV\\tfjs-models\\pose-detection\\demos\\upload_video\\node_modules\\@tensorflow-models\\pose-detection\\shared\\filters\\one_euro_filter.js"}],"generated":{"js":"\"use strict\";\r\n/**\r\n * @license\r\n * Copyright 2021 Google LLC. All Rights Reserved.\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * https://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * =============================================================================\r\n */\r\nvar __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KeypointsOneEuroFilter = void 0;\r\nvar one_euro_filter_1 = require(\"./one_euro_filter\");\r\n/**\r\n * A stateful filter that smoothes keypoints values overtime.\r\n *\r\n * More specifically, it uses `OneEuroFilter` to smooth every x, y, z\r\n * coordinates over time, which as result gives us velocity of how these values\r\n * change over time. With higher velocity it weights new values higher.\r\n */\r\n// ref:\r\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/landmarks_smoothing_calculator.cc\r\nvar KeypointsOneEuroFilter = /** @class */ (function () {\r\n    function KeypointsOneEuroFilter(config) {\r\n        this.config = config;\r\n    }\r\n    KeypointsOneEuroFilter.prototype.apply = function (keypoints, microSeconds, objectScale) {\r\n        var _this = this;\r\n        if (keypoints == null) {\r\n            this.reset();\r\n            return null;\r\n        }\r\n        // Initialize filters once.\r\n        this.initializeFiltersIfEmpty(keypoints);\r\n        // Get value scale as inverse value of the object scale.\r\n        // If value is too small smoothing will be disabled and keypoints will be\r\n        // returned as is.\r\n        var valueScale = 1;\r\n        if (!this.config.disableValueScaling) {\r\n            if (objectScale < this.config.minAllowedObjectScale) {\r\n                return __spreadArray([], keypoints, true);\r\n            }\r\n            valueScale = 1.0 / objectScale;\r\n        }\r\n        // Filter keypoints. Every axis of every keypoint is filtered separately.\r\n        return keypoints.map(function (keypoint, i) {\r\n            var outKeypoint = __assign(__assign({}, keypoint), { x: _this.xFilters[i].apply(keypoint.x, microSeconds, valueScale), y: _this.yFilters[i].apply(keypoint.y, microSeconds, valueScale) });\r\n            if (keypoint.z != null) {\r\n                outKeypoint.z =\r\n                    _this.zFilters[i].apply(keypoint.z, microSeconds, valueScale);\r\n            }\r\n            return outKeypoint;\r\n        });\r\n    };\r\n    KeypointsOneEuroFilter.prototype.reset = function () {\r\n        this.xFilters = null;\r\n        this.yFilters = null;\r\n        this.zFilters = null;\r\n    };\r\n    // Initializes filters for the first time or after reset. If initialized the\r\n    // check the size.\r\n    KeypointsOneEuroFilter.prototype.initializeFiltersIfEmpty = function (keypoints) {\r\n        var _this = this;\r\n        if (this.xFilters == null || this.xFilters.length !== keypoints.length) {\r\n            this.xFilters = keypoints.map(function (_) { return new one_euro_filter_1.OneEuroFilter(_this.config); });\r\n            this.yFilters = keypoints.map(function (_) { return new one_euro_filter_1.OneEuroFilter(_this.config); });\r\n            this.zFilters = keypoints.map(function (_) { return new one_euro_filter_1.OneEuroFilter(_this.config); });\r\n        }\r\n    };\r\n    return KeypointsOneEuroFilter;\r\n}());\r\nexports.KeypointsOneEuroFilter = KeypointsOneEuroFilter;\r\n"},"sourceMaps":{"js":{"version":3,"file":"keypoints_one_euro_filter.js","sourceRoot":"","sources":["../../../src/shared/filters/keypoints_one_euro_filter.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;GAeG;;;;;;;;;;;;;;;;;;;;;;;AAIH,qDAAgD;AAEhD;;;;;;GAMG;AACH,OAAO;AACP,+GAA+G;AAC/G;IAKE,gCAA6B,MAA2B;QAA3B,WAAM,GAAN,MAAM,CAAqB;IAAG,CAAC;IAE5D,sCAAK,GAAL,UAAM,SAAqB,EAAE,YAAoB,EAAE,WAAmB;QAAtE,iBAoCC;QAlCC,IAAI,SAAS,IAAI,IAAI,EAAE;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,OAAO,IAAI,CAAC;SACb;QAED,2BAA2B;QAC3B,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;QAEzC,wDAAwD;QACxD,yEAAyE;QACzE,kBAAkB;QAClB,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,EAAE;YACpC,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE;gBACnD,yBAAW,SAAS,QAAE;aACvB;YACD,UAAU,GAAG,GAAG,GAAG,WAAW,CAAC;SAChC;QAED,yEAAyE;QACzE,OAAO,SAAS,CAAC,GAAG,CAAC,UAAC,QAAQ,EAAE,CAAC;YAC/B,IAAM,WAAW,yBACZ,QAAQ,KACX,CAAC,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,EAC/D,CAAC,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,GAChE,CAAC;YAEF,IAAI,QAAQ,CAAC,CAAC,IAAI,IAAI,EAAE;gBACtB,WAAW,CAAC,CAAC;oBACT,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;aAClE;YAED,OAAO,WAAW,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,sCAAK,GAAL;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,4EAA4E;IAC5E,kBAAkB;IACV,yDAAwB,GAAhC,UAAiC,SAAqB;QAAtD,iBAMC;QALC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,EAAE;YACtE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,+BAAa,CAAC,KAAI,CAAC,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;YACnE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,+BAAa,CAAC,KAAI,CAAC,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;YACnE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,+BAAa,CAAC,KAAI,CAAC,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;SACpE;IACH,CAAC;IACH,6BAAC;AAAD,CAAC,AA5DD,IA4DC;AA5DY,wDAAsB","sourcesContent":[null]}},"error":null,"hash":"920cc0e4f9ff6594baed0083c6b30630","cacheData":{"env":{}}}