{"id":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_velocity_filter.js","dependencies":[{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_velocity_filter.js.map","includedInParent":true,"mtime":1701727604751},{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/package.json","includedInParent":true,"mtime":1706695927697},{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/.babelrc","includedInParent":true,"mtime":1701727604305},{"name":"./relative_velocity_filter","loc":{"line":24,"column":41,"index":924},"parent":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_velocity_filter.js","resolved":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/shared/filters/relative_velocity_filter.js"}],"generated":{"js":"\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeypointsVelocityFilter = void 0;\nvar relative_velocity_filter_1 = require(\"./relative_velocity_filter\");\n/**\n * A stateful filter that smoothes landmark values overtime.\n *\n * More specifically, it uses `RelativeVelocityFilter` to smooth every x, y, z\n * coordinates over time, which as result gives us velocity of how these values\n * change over time. With higher velocity it weights new values higher.\n */\n// ref:\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/landmarks_smoothing_calculator.cc\nvar KeypointsVelocityFilter = /** @class */ (function () {\n    function KeypointsVelocityFilter(config) {\n        this.config = config;\n    }\n    KeypointsVelocityFilter.prototype.apply = function (keypoints, microSeconds, objectScale) {\n        var _this = this;\n        if (keypoints == null) {\n            this.reset();\n            return null;\n        }\n        // Get value scale as inverse value of the object scale.\n        // If value is too small smoothing will be disabled and keypoints will be\n        // returned as is.\n        var valueScale = 1;\n        if (!this.config.disableValueScaling) {\n            if (objectScale < this.config.minAllowedObjectScale) {\n                return __spreadArray([], keypoints, true);\n            }\n            valueScale = 1 / objectScale;\n        }\n        // Initialize filters once.\n        this.initializeFiltersIfEmpty(keypoints);\n        // Filter keypoints. Every axis of every keypoint is filtered separately.\n        return keypoints.map(function (keypoint, i) {\n            var outKeypoint = __assign(__assign({}, keypoint), { x: _this.xFilters[i].apply(keypoint.x, microSeconds, valueScale), y: _this.yFilters[i].apply(keypoint.y, microSeconds, valueScale) });\n            if (keypoint.z != null) {\n                outKeypoint.z =\n                    _this.zFilters[i].apply(keypoint.z, microSeconds, valueScale);\n            }\n            return outKeypoint;\n        });\n    };\n    KeypointsVelocityFilter.prototype.reset = function () {\n        this.xFilters = null;\n        this.yFilters = null;\n        this.zFilters = null;\n    };\n    // Initializes filters for the first time or after reset. If initialized the\n    // check the size.\n    KeypointsVelocityFilter.prototype.initializeFiltersIfEmpty = function (keypoints) {\n        var _this = this;\n        if (this.xFilters == null || this.xFilters.length !== keypoints.length) {\n            this.xFilters =\n                keypoints.map(function (_) { return new relative_velocity_filter_1.RelativeVelocityFilter(_this.config); });\n            this.yFilters =\n                keypoints.map(function (_) { return new relative_velocity_filter_1.RelativeVelocityFilter(_this.config); });\n            this.zFilters =\n                keypoints.map(function (_) { return new relative_velocity_filter_1.RelativeVelocityFilter(_this.config); });\n        }\n    };\n    return KeypointsVelocityFilter;\n}());\nexports.KeypointsVelocityFilter = KeypointsVelocityFilter;\n"},"sourceMaps":{"js":{"version":3,"file":"keypoints_velocity_filter.js","sourceRoot":"","sources":["../../../src/shared/filters/keypoints_velocity_filter.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAkBA,uEAAkE;AAElE;;;;;;GAMG;AACH,OAAO;AACP,+GAA+G;AAC/G;IAKE,iCAA6B,MAA4B;QAA5B,WAAM,GAAN,MAAM,CAAsB;IAAG,CAAC;IAE7D,uCAAK,GAAL,UAAM,SAAqB,EAAE,YAAoB,EAAE,WAAmB;QAAtE,iBAmCC;QAjCC,IAAI,SAAS,IAAI,IAAI,EAAE;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,OAAO,IAAI,CAAC;SACb;QACD,wDAAwD;QACxD,yEAAyE;QACzE,kBAAkB;QAClB,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,EAAE;YACpC,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE;gBACnD,yBAAW,SAAS,QAAE;aACvB;YACD,UAAU,GAAG,CAAC,GAAG,WAAW,CAAC;SAC9B;QAED,2BAA2B;QAC3B,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;QAEzC,yEAAyE;QACzE,OAAO,SAAS,CAAC,GAAG,CAAC,UAAC,QAAQ,EAAE,CAAC;YAC/B,IAAM,WAAW,yBACZ,QAAQ,KACX,CAAC,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,EAC/D,CAAC,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,GAChE,CAAC;YAEF,IAAI,QAAQ,CAAC,CAAC,IAAI,IAAI,EAAE;gBACtB,WAAW,CAAC,CAAC;oBACT,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;aAClE;YAED,OAAO,WAAW,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,uCAAK,GAAL;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,4EAA4E;IAC5E,kBAAkB;IACV,0DAAwB,GAAhC,UAAiC,SAAqB;QAAtD,iBASC;QARC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,EAAE;YACtE,IAAI,CAAC,QAAQ;gBACT,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,iDAAsB,CAAC,KAAI,CAAC,MAAM,CAAC,EAAvC,CAAuC,CAAC,CAAC;YAChE,IAAI,CAAC,QAAQ;gBACT,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,iDAAsB,CAAC,KAAI,CAAC,MAAM,CAAC,EAAvC,CAAuC,CAAC,CAAC;YAChE,IAAI,CAAC,QAAQ;gBACT,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,iDAAsB,CAAC,KAAI,CAAC,MAAM,CAAC,EAAvC,CAAuC,CAAC,CAAC;SACjE;IACH,CAAC;IACH,8BAAC;AAAD,CAAC,AA9DD,IA8DC;AA9DY,0DAAuB","sourcesContent":[null]}},"error":null,"hash":"686804327a7fcee3c296575dc8d4e8fe","cacheData":{"env":{}}}