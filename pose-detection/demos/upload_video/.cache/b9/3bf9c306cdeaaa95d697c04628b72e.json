{"id":"node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_one_euro_filter.js","dependencies":[{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_one_euro_filter.js.map","includedInParent":true,"mtime":1701727604751},{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/package.json","includedInParent":true,"mtime":1708744722972},{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/.babelrc","includedInParent":true,"mtime":1701727604305},{"name":"./one_euro_filter","loc":{"line":40,"column":32,"index":1618},"parent":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/shared/filters/keypoints_one_euro_filter.js","resolved":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/shared/filters/one_euro_filter.js"}],"generated":{"js":"\"use strict\";\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.KeypointsOneEuroFilter = void 0;\nvar one_euro_filter_1 = require(\"./one_euro_filter\");\n/**\n * A stateful filter that smoothes keypoints values overtime.\n *\n * More specifically, it uses `OneEuroFilter` to smooth every x, y, z\n * coordinates over time, which as result gives us velocity of how these values\n * change over time. With higher velocity it weights new values higher.\n */\n// ref:\n// https://github.com/google/mediapipe/blob/master/mediapipe/calculators/util/landmarks_smoothing_calculator.cc\nvar KeypointsOneEuroFilter = /** @class */ (function () {\n    function KeypointsOneEuroFilter(config) {\n        this.config = config;\n    }\n    KeypointsOneEuroFilter.prototype.apply = function (keypoints, microSeconds, objectScale) {\n        var _this = this;\n        if (keypoints == null) {\n            this.reset();\n            return null;\n        }\n        // Initialize filters once.\n        this.initializeFiltersIfEmpty(keypoints);\n        // Get value scale as inverse value of the object scale.\n        // If value is too small smoothing will be disabled and keypoints will be\n        // returned as is.\n        var valueScale = 1;\n        if (!this.config.disableValueScaling) {\n            if (objectScale < this.config.minAllowedObjectScale) {\n                return __spreadArray([], keypoints, true);\n            }\n            valueScale = 1.0 / objectScale;\n        }\n        // Filter keypoints. Every axis of every keypoint is filtered separately.\n        return keypoints.map(function (keypoint, i) {\n            var outKeypoint = __assign(__assign({}, keypoint), { x: _this.xFilters[i].apply(keypoint.x, microSeconds, valueScale), y: _this.yFilters[i].apply(keypoint.y, microSeconds, valueScale) });\n            if (keypoint.z != null) {\n                outKeypoint.z =\n                    _this.zFilters[i].apply(keypoint.z, microSeconds, valueScale);\n            }\n            return outKeypoint;\n        });\n    };\n    KeypointsOneEuroFilter.prototype.reset = function () {\n        this.xFilters = null;\n        this.yFilters = null;\n        this.zFilters = null;\n    };\n    // Initializes filters for the first time or after reset. If initialized the\n    // check the size.\n    KeypointsOneEuroFilter.prototype.initializeFiltersIfEmpty = function (keypoints) {\n        var _this = this;\n        if (this.xFilters == null || this.xFilters.length !== keypoints.length) {\n            this.xFilters = keypoints.map(function (_) { return new one_euro_filter_1.OneEuroFilter(_this.config); });\n            this.yFilters = keypoints.map(function (_) { return new one_euro_filter_1.OneEuroFilter(_this.config); });\n            this.zFilters = keypoints.map(function (_) { return new one_euro_filter_1.OneEuroFilter(_this.config); });\n        }\n    };\n    return KeypointsOneEuroFilter;\n}());\nexports.KeypointsOneEuroFilter = KeypointsOneEuroFilter;\n"},"sourceMaps":{"js":{"version":3,"file":"keypoints_one_euro_filter.js","sourceRoot":"","sources":["../../../src/shared/filters/keypoints_one_euro_filter.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;GAeG;;;;;;;;;;;;;;;;;;;;;;;AAIH,qDAAgD;AAEhD;;;;;;GAMG;AACH,OAAO;AACP,+GAA+G;AAC/G;IAKE,gCAA6B,MAA2B;QAA3B,WAAM,GAAN,MAAM,CAAqB;IAAG,CAAC;IAE5D,sCAAK,GAAL,UAAM,SAAqB,EAAE,YAAoB,EAAE,WAAmB;QAAtE,iBAoCC;QAlCC,IAAI,SAAS,IAAI,IAAI,EAAE;YACrB,IAAI,CAAC,KAAK,EAAE,CAAC;YACb,OAAO,IAAI,CAAC;SACb;QAED,2BAA2B;QAC3B,IAAI,CAAC,wBAAwB,CAAC,SAAS,CAAC,CAAC;QAEzC,wDAAwD;QACxD,yEAAyE;QACzE,kBAAkB;QAClB,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,mBAAmB,EAAE;YACpC,IAAI,WAAW,GAAG,IAAI,CAAC,MAAM,CAAC,qBAAqB,EAAE;gBACnD,yBAAW,SAAS,QAAE;aACvB;YACD,UAAU,GAAG,GAAG,GAAG,WAAW,CAAC;SAChC;QAED,yEAAyE;QACzE,OAAO,SAAS,CAAC,GAAG,CAAC,UAAC,QAAQ,EAAE,CAAC;YAC/B,IAAM,WAAW,yBACZ,QAAQ,KACX,CAAC,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,EAC/D,CAAC,EAAE,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,GAChE,CAAC;YAEF,IAAI,QAAQ,CAAC,CAAC,IAAI,IAAI,EAAE;gBACtB,WAAW,CAAC,CAAC;oBACT,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC,EAAE,YAAY,EAAE,UAAU,CAAC,CAAC;aAClE;YAED,OAAO,WAAW,CAAC;QACrB,CAAC,CAAC,CAAC;IACL,CAAC;IAED,sCAAK,GAAL;QACE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IACvB,CAAC;IAED,4EAA4E;IAC5E,kBAAkB;IACV,yDAAwB,GAAhC,UAAiC,SAAqB;QAAtD,iBAMC;QALC,IAAI,IAAI,CAAC,QAAQ,IAAI,IAAI,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,SAAS,CAAC,MAAM,EAAE;YACtE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,+BAAa,CAAC,KAAI,CAAC,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;YACnE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,+BAAa,CAAC,KAAI,CAAC,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;YACnE,IAAI,CAAC,QAAQ,GAAG,SAAS,CAAC,GAAG,CAAC,UAAA,CAAC,IAAI,OAAA,IAAI,+BAAa,CAAC,KAAI,CAAC,MAAM,CAAC,EAA9B,CAA8B,CAAC,CAAC;SACpE;IACH,CAAC;IACH,6BAAC;AAAD,CAAC,AA5DD,IA4DC;AA5DY,wDAAsB","sourcesContent":[null]}},"error":null,"hash":"138d1f9beda737fc77cd016350255db4","cacheData":{"env":{}}}