{"id":"node_modules/@tensorflow-models/pose-detection/posenet/ops/get_offset_vectors_webgpu.js","dependencies":[{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/ops/get_offset_vectors_webgpu.js.map","includedInParent":true,"mtime":1701727604740},{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/package.json","includedInParent":true,"mtime":1707784897195},{"name":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/.babelrc","includedInParent":true,"mtime":1701727604305},{"name":"@tensorflow/tfjs-backend-webgpu","loc":{"line":20,"column":23,"index":823},"parent":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/ops/get_offset_vectors_webgpu.js","resolved":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow/tfjs-backend-webgpu/dist/index.js"},{"name":"@tensorflow/tfjs-core","loc":{"line":21,"column":17,"index":876},"parent":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/ops/get_offset_vectors_webgpu.js","resolved":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow/tfjs-core/dist/index.js"},{"name":"./webgpu_util","loc":{"line":22,"column":28,"index":930},"parent":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/ops/get_offset_vectors_webgpu.js","resolved":"/Users/vpenumarti/Desktop/CS/Aggie_Sports_Analytics/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/ops/webgpu_util.js"}],"generated":{"js":"\"use strict\";\n/**\n * @license\n * Copyright 2023 Google LLC.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOffsetVectorsWebGPU = void 0;\nvar tfwebgpu = require(\"@tensorflow/tfjs-backend-webgpu\");\nvar tf = require(\"@tensorflow/tfjs-core\");\nvar webgpu_util_1 = require(\"./webgpu_util\");\nvar GetOffsetVectorsProgram = /** @class */ (function () {\n    function GetOffsetVectorsProgram(outputShape) {\n        // A is heatmapScores, B is heatMapCoords.\n        this.variableNames = ['A', 'B'];\n        this.size = true;\n        this.supportedLastDimension = 2;\n        // Only 2d tensor whose last dimension is 2 is supported.\n        if (outputShape.length !== 2 ||\n            outputShape[1] !== this.supportedLastDimension) {\n            throw new Error(\"GetOffsetVectorsProgram only supports shape of [x, \".concat(this.supportedLastDimension, \"], but current shape is \").concat(outputShape));\n        }\n        var workgroupSizeX = 32;\n        this.workgroupSize = [workgroupSizeX, 1, 1];\n        this.outputShape = outputShape;\n        var computeDispatchInfo = [outputShape[0], 1];\n        this.dispatchLayout =\n            tfwebgpu.webgpu_util.flatDispatchLayout(computeDispatchInfo);\n        this.dispatch = tfwebgpu.webgpu_util.computeDispatch(this.dispatchLayout, computeDispatchInfo, this.workgroupSize);\n        this.shaderKey = 'GetOffsetVectors';\n    }\n    GetOffsetVectorsProgram.prototype.getUserCode = function () {\n        return \"\\n    fn getOffsetPoint(y: i32, x: i32, index: i32) -> vec2<i32> {\\n      let outIndexY = y * uniforms.bShape.x * uniforms.bShape.y + x * uniforms.bShape.y + index;\\n      let outIndexX = outIndexY + uniforms.bShape.z;\\n      let outY = i32(B[outIndexY]);\\n      let outX = i32(B[outIndexX]);\\n      return vec2<i32>(outY, outX);\\n    }\\n\\n    \".concat((0, webgpu_util_1.getMainHeaderString)('index'), \" {\\n      if (index < uniforms.size) {\\n        let indexY = index * \").concat(this.supportedLastDimension, \";\\n        let indexX = indexY + 1;\\n        let heatmapY = A[indexY];\\n        let heatmapX = A[indexX];\\n        let out = getOffsetPoint(i32(heatmapY), i32(heatmapX), index);\\n        result[indexY] = f32(out[0]);\\n        result[indexX] = f32(out[1]);\\n      }\\n    }\\n    \");\n    };\n    return GetOffsetVectorsProgram;\n}());\nfunction getOffsetVectorsWebGPU(a, b) {\n    var webgpuBackend = tf.backend();\n    var program = new GetOffsetVectorsProgram(a.shape);\n    var outInfo = webgpuBackend.runWebGPUProgram(program, [a, b], 'float32');\n    var value = tf.engine().makeTensorFromTensorInfo(outInfo);\n    return value;\n}\nexports.getOffsetVectorsWebGPU = getOffsetVectorsWebGPU;\n"},"sourceMaps":{"js":{"version":3,"file":"get_offset_vectors_webgpu.js","sourceRoot":"","sources":["../../../src/posenet/ops/get_offset_vectors_webgpu.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;GAeG;;;AAEH,0DAA4D;AAC5D,0CAA4C;AAC5C,6CAAkD;AAElD;IAWE,iCAAY,WAAqB;QANjC,0CAA0C;QAC1C,kBAAa,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAE3B,SAAI,GAAG,IAAI,CAAC;QACZ,2BAAsB,GAAG,CAAC,CAAC;QAGzB,yDAAyD;QACzD,IAAI,WAAW,CAAC,MAAM,KAAK,CAAC;YACxB,WAAW,CAAC,CAAC,CAAC,KAAK,IAAI,CAAC,sBAAsB,EAAE;YAClD,MAAM,IAAI,KAAK,CAAC,6DACZ,IAAI,CAAC,sBAAsB,qCAA2B,WAAW,CAAE,CAAC,CAAC;SAC1E;QACD,IAAM,cAAc,GAAG,EAAE,CAAC;QAC1B,IAAI,CAAC,aAAa,GAAG,CAAC,cAAc,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5C,IAAI,CAAC,WAAW,GAAG,WAAW,CAAC;QAC/B,IAAM,mBAAmB,GAAG,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAChD,IAAI,CAAC,cAAc;YACf,QAAQ,CAAC,WAAW,CAAC,kBAAkB,CAAC,mBAAmB,CAAC,CAAC;QACjE,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,WAAW,CAAC,eAAe,CAChD,IAAI,CAAC,cAAc,EAAE,mBAAmB,EAAE,IAAI,CAAC,aAAa,CAAC,CAAC;QAClE,IAAI,CAAC,SAAS,GAAG,kBAAkB,CAAC;IACtC,CAAC;IAED,6CAAW,GAAX;QACE,OAAO,kWASL,IAAA,iCAAmB,EAAC,OAAO,CAAC,kFAEH,IAAI,CAAC,sBAAsB,0RASrD,CAAC;IACJ,CAAC;IACH,8BAAC;AAAD,CAAC,AApDD,IAoDC;AAED,SAAgB,sBAAsB,CAAsB,CAAI,EAAE,CAAI;IACpE,IAAM,aAAa,GAAG,EAAE,CAAC,OAAO,EAA4B,CAAC;IAC7D,IAAM,OAAO,GAAG,IAAI,uBAAuB,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;IAErD,IAAM,OAAO,GACT,aAAa,CAAC,gBAAgB,CAAC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,SAAS,CAAC,CAAC;IAC/D,IAAM,KAAK,GAAG,EAAE,CAAC,MAAM,EAAE,CAAC,wBAAwB,CAAC,OAAO,CAAM,CAAC;IAEjE,OAAO,KAAK,CAAC;AACf,CAAC;AATD,wDASC","sourcesContent":[null]}},"error":null,"hash":"14234332c0daf0f754ba1d0d77f9e056","cacheData":{"env":{}}}