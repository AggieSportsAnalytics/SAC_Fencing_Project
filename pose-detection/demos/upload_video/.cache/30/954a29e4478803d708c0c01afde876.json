{"id":"node_modules/@tensorflow-models/pose-detection/posenet/calculators/decode_single_pose_util.js","dependencies":[{"name":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/calculators/decode_single_pose_util.js.map","includedInParent":true,"mtime":1701727604738},{"name":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/package.json","includedInParent":true,"mtime":1705897905701},{"name":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/.babelrc","includedInParent":true,"mtime":1701727604305},{"name":"@tensorflow/tfjs-core","loc":{"line":20,"column":17,"index":936},"parent":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/calculators/decode_single_pose_util.js","resolved":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow/tfjs-core/dist/index.js"},{"name":"../../constants","loc":{"line":21,"column":26,"index":988},"parent":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/calculators/decode_single_pose_util.js","resolved":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/constants.js"},{"name":"../ops/get_offset_vectors","loc":{"line":22,"column":35,"index":1043},"parent":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/calculators/decode_single_pose_util.js","resolved":"/Users/vpenumarti/Desktop/CS/SAC_Fencing_Project/pose-detection/demos/upload_video/node_modules/@tensorflow-models/pose-detection/posenet/ops/get_offset_vectors.js"}],"generated":{"js":"\"use strict\";\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getOffsetPointsGPU = exports.getOffsetVectors = exports.getOffsetPoints = exports.getPointsConfidence = exports.argmax2d = void 0;\nvar tf = require(\"@tensorflow/tfjs-core\");\nvar constants_1 = require(\"../../constants\");\nvar get_offset_vectors_1 = require(\"../ops/get_offset_vectors\");\nfunction mod(a, b) {\n    return tf.tidy(function () {\n        var floored = tf.div(a, tf.scalar(b, 'int32'));\n        return tf.sub(a, tf.mul(floored, tf.scalar(b, 'int32')));\n    });\n}\nfunction argmax2d(inputs) {\n    var _a = inputs.shape, height = _a[0], width = _a[1], depth = _a[2];\n    return tf.tidy(function () {\n        var reshaped = tf.reshape(inputs, [height * width, depth]);\n        var coords = tf.argMax(reshaped, 0);\n        var yCoords = tf.expandDims(tf.div(coords, tf.scalar(width, 'int32')), 1);\n        var xCoords = tf.expandDims(mod(coords, width), 1);\n        return tf.concat([yCoords, xCoords], 1);\n    });\n}\nexports.argmax2d = argmax2d;\nfunction getPointsConfidence(heatmapScores, heatMapCoords) {\n    var numKeypoints = heatMapCoords.shape[0];\n    var result = new Float32Array(numKeypoints);\n    for (var keypoint = 0; keypoint < numKeypoints; keypoint++) {\n        var y = heatMapCoords.get(keypoint, 0);\n        var x = heatMapCoords.get(keypoint, 1);\n        result[keypoint] = heatmapScores.get(y, x, keypoint);\n    }\n    return result;\n}\nexports.getPointsConfidence = getPointsConfidence;\nfunction getOffsetPoints(heatMapCoordsBuffer, outputStride, offsetsBuffer) {\n    return tf.tidy(function () {\n        var offsetVectors = getOffsetVectors(heatMapCoordsBuffer, offsetsBuffer);\n        return tf.add(tf.cast(tf.mul(heatMapCoordsBuffer.toTensor(), tf.scalar(outputStride, 'int32')), 'float32'), offsetVectors);\n    });\n}\nexports.getOffsetPoints = getOffsetPoints;\nfunction getOffsetVectors(heatMapCoordsBuffer, offsetsBuffer) {\n    var result = [];\n    for (var keypoint = 0; keypoint < constants_1.COCO_KEYPOINTS.length; keypoint++) {\n        var heatmapY = heatMapCoordsBuffer.get(keypoint, 0).valueOf();\n        var heatmapX = heatMapCoordsBuffer.get(keypoint, 1).valueOf();\n        var _a = getOffsetPoint(heatmapY, heatmapX, keypoint, offsetsBuffer), x = _a.x, y = _a.y;\n        result.push(y);\n        result.push(x);\n    }\n    return tf.tensor2d(result, [constants_1.COCO_KEYPOINTS.length, 2]);\n}\nexports.getOffsetVectors = getOffsetVectors;\nfunction getOffsetPoint(y, x, keypoint, offsetsBuffer) {\n    return {\n        y: offsetsBuffer.get(y, x, keypoint),\n        x: offsetsBuffer.get(y, x, keypoint + constants_1.COCO_KEYPOINTS.length)\n    };\n}\nfunction getOffsetPointsGPU(heatMapCoordsBuffer, outputStride, offsetsBuffer) {\n    return tf.tidy(function () {\n        var offsetVectors = (0, get_offset_vectors_1.getOffsetVectorsGPU)(heatMapCoordsBuffer, offsetsBuffer);\n        return tf.add(tf.cast(tf.mul(heatMapCoordsBuffer, tf.scalar(outputStride, 'int32')), 'float32'), offsetVectors);\n    });\n}\nexports.getOffsetPointsGPU = getOffsetPointsGPU;\n"},"sourceMaps":{"js":{"version":3,"file":"decode_single_pose_util.js","sourceRoot":"","sources":["../../../src/posenet/calculators/decode_single_pose_util.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;;GAeG;;;AAEH,0CAA4C;AAC5C,6CAA+C;AAE/C,gEAA8D;AAE9D,SAAS,GAAG,CAAC,CAAc,EAAE,CAAS;IACpC,OAAO,EAAE,CAAC,IAAI,CAAC;QACb,IAAM,OAAO,GAAG,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC;QAEjD,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,GAAG,CAAC,OAAO,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC,CAAC,CAAC;IAC3D,CAAC,CAAC,CAAC;AACL,CAAC;AAED,SAAgB,QAAQ,CAAC,MAAmB;IACpC,IAAA,KAAyB,MAAM,CAAC,KAAK,EAApC,MAAM,QAAA,EAAE,KAAK,QAAA,EAAE,KAAK,QAAgB,CAAC;IAE5C,OAAO,EAAE,CAAC,IAAI,CAAC;QACb,IAAM,QAAQ,GAAG,EAAE,CAAC,OAAO,CAAC,MAAM,EAAE,CAAC,MAAM,GAAG,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC;QAC7D,IAAM,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QAEtC,IAAM,OAAO,GAAG,EAAE,CAAC,UAAU,CAAC,EAAE,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,CAAC,MAAM,CAAC,KAAK,EAAE,OAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;QAC5E,IAAM,OAAO,GAAG,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,MAAqB,EAAE,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC;QAEpE,OAAO,EAAE,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC;IAC1C,CAAC,CAAgB,CAAC;AACpB,CAAC;AAZD,4BAYC;AAED,SAAgB,mBAAmB,CAC/B,aAA0C,EAC1C,aAA0C;IAC5C,IAAM,YAAY,GAAG,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;IAC5C,IAAM,MAAM,GAAG,IAAI,YAAY,CAAC,YAAY,CAAC,CAAC;IAE9C,KAAK,IAAI,QAAQ,GAAG,CAAC,EAAE,QAAQ,GAAG,YAAY,EAAE,QAAQ,EAAE,EAAE;QAC1D,IAAM,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACzC,IAAM,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;QACzC,MAAM,CAAC,QAAQ,CAAC,GAAG,aAAa,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC,CAAC;KACtD;IAED,OAAO,MAAM,CAAC;AAChB,CAAC;AAbD,kDAaC;AAED,SAAgB,eAAe,CAC3B,mBAAgD,EAAE,YAAoB,EACtE,aAA0C;IAC5C,OAAO,EAAE,CAAC,IAAI,CAAC;QACb,IAAM,aAAa,GAAG,gBAAgB,CAAC,mBAAmB,EAAE,aAAa,CAAC,CAAC;QAE3E,OAAO,EAAE,CAAC,GAAG,CACT,EAAE,CAAC,IAAI,CACH,EAAE,CAAC,GAAG,CACF,mBAAmB,CAAC,QAAQ,EAAE,EAC9B,EAAE,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC,EACrC,SAAS,CAAC,EACd,aAAa,CAAC,CAAC;IACrB,CAAC,CAAC,CAAC;AACL,CAAC;AAdD,0CAcC;AAED,SAAgB,gBAAgB,CAC5B,mBAAgD,EAChD,aAA0C;IAC5C,IAAM,MAAM,GAAa,EAAE,CAAC;IAE5B,KAAK,IAAI,QAAQ,GAAG,CAAC,EAAE,QAAQ,GAAG,0BAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,EAAE;QACnE,IAAM,QAAQ,GAAG,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;QAChE,IAAM,QAAQ,GAAG,mBAAmB,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,OAAO,EAAE,CAAC;QAE1D,IAAA,KAAS,cAAc,CAAC,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE,aAAa,CAAC,EAAnE,CAAC,OAAA,EAAE,CAAC,OAA+D,CAAC;QAE3E,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QACf,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;KAChB;IAED,OAAO,EAAE,CAAC,QAAQ,CAAC,MAAM,EAAE,CAAC,0BAAc,CAAC,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC;AACzD,CAAC;AAhBD,4CAgBC;AAED,SAAS,cAAc,CACnB,CAAS,EAAE,CAAS,EAAE,QAAgB,EACtC,aAA0C;IAC5C,OAAO;QACL,CAAC,EAAE,aAAa,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,QAAQ,CAAC;QACpC,CAAC,EAAE,aAAa,CAAC,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,QAAQ,GAAG,0BAAc,CAAC,MAAM,CAAC;KAC7D,CAAC;AACJ,CAAC;AAED,SAAgB,kBAAkB,CAChC,mBAA0C,EAAE,YAAoB,EAChE,aAAoC;IACtC,OAAO,EAAE,CAAC,IAAI,CAAC;QACb,IAAM,aAAa,GACf,IAAA,wCAAmB,EAAC,mBAAmB,EAAE,aAA0B,CAAC,CAAC;QAEzE,OAAO,EAAE,CAAC,GAAG,CACT,EAAE,CAAC,IAAI,CACH,EAAE,CAAC,GAAG,CAAC,mBAAmB,EAAE,EAAE,CAAC,MAAM,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC,EAC7D,SAAS,CAAC,EACd,aAAa,CAAC,CAAC;IACrB,CAAC,CAAC,CAAC;AACH,CAAC;AAbD,gDAaC","sourcesContent":[null]}},"error":null,"hash":"9112754288eda0aad1496600537ad55f","cacheData":{"env":{}}}